webpackJsonp([3],{"+UAx":function(t,e){},"7Otq":function(t,e,n){t.exports=n.p+"static/img/logo.37e8d03.png"},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("7+uW"),r=n("7Otq"),a=n.n(r),i=n("xAza"),c=n.n(i),u={name:"App",data:function(){return{background:[],backgroundUpdater:null,nav:[{title:"首页",to:"/index"},{title:"简介",to:"/instruction"},{title:"资源",to:"/resources"},{title:"关于我们",to:"/about"}]}},watch:{background:function(){this.backgroundUpdater&&this.backgroundUpdater(this.background)}},methods:{initCube:function(){this.background=["山商嵌入式",new Image,"期待你的加入！",new Image,"山商嵌入式"];var t=0,e=this;this.background[1].src=a.a,this.background[3].src=c.a,this.background[1].onload=this.background[3].onload=function(){t<1?t++:e.backgroundUpdater?e.backgroundUpdater():e.backgroundUpdater=e.initBackground(e.background)}},changeCubeTextures:function(t){this.background=t},navPress:function(){console.log(arguments)}},mounted:function(){this.initCube()}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"nav"},[n("div",{staticClass:"title"},[t._v("山商嵌入式")]),t._v(" "),n("ul",t._l(t.nav,function(e,o){return n("router-link",{key:o,attrs:{tag:"li",tabindex:"1",to:e.to,"active-class":"active"},nativeOn:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.target.click()}}},[t._v(t._s(e.title))])}),1),t._v(" "),n("div")]),t._v(" "),n("transition",{attrs:{name:"fade"}},[n("router-view",{on:{changeCubeTextures:t.changeCubeTextures,initCube:t.initCube}})],1)],1)},staticRenderFns:[]};var l=n("VU/8")(u,s,!1,function(t){n("+UAx"),n("wOrG")},"data-v-4023fccc",null).exports,v=n("/ocq"),d=n("Y81h"),p=n.n(d);n("UVIz");o.a.use(v.a);var f=new v.a({routes:[{path:"/",redirect:"/index"},{path:"/index",name:"HelloWorld",component:function(){return n.e(0).then(n.bind(null,"gORT"))}},{path:"*",name:"NotFound",component:function(){return n.e(1).then(n.bind(null,"YcJa"))}}]});f.beforeEach(function(t,e,n){p.a.start(),n()}),f.afterEach(function(){p.a.done()});var m=f,_=n("lVvd"),x=(n("od15"),void 0),g=function(){x&&x.begin()},h=function(){x&&x.end()},y=(n("+G5l"),n("OAwv")),b=n.n(y),k=void 0;setTimeout(function(){b.a.parse(location.search).debug});var w=function(t){setTimeout(function(){k&&t(k)})},I=[],C=function(t,e){var o=t.texture(),r={flipY:!0,width:1024,height:1024};if("string"==typeof e){var a=new Image;a.src=n("PvXa")("./"+e),a.onload=function(){r.data=a,o(r)}}else r.data=e,o(r);return I.push({texture:o,param:r}),o},O=function(){for(var t in I)if(I.hasOwnProperty(t)){var e=I[t];e.texture(e.param)}},P=1024,F=function(t,e){e=e||document.body.style.fontFamily;var n=document.createElement("canvas");n.width=n.height=P;var o=n.getContext("2d"),r=t.split("\n"),a=0;for(var i in r)if(r.hasOwnProperty(i)){var c=r[i];c.length>a&&(a=c.length)}return o.font=.75*P/(r.length>a?r.length:a)+"px bold "+e,o.fillStyle="#fff",o.textAlign="center",o.textBaseline="middle",o.fillText(t,512,512),new function(t,e){var n=this,o=[];this.getText=function(){return e},this.updateText=function(e){for(var r in t.clearReact(0,0,P,P),t.fillText(e,512,512),o)if(o.hasOwnProperty(r)){var a=o[r];"function"==typeof a&&a(n)}},this.setOnTextUpdateListener=function(t){"function"==typeof t&&o.push(t)},this.removeOnTextUpdateListener=function(t){o.splice(o.indexOf(t),1)},this.context=t}(o,t)},L=n("8a/n"),M=n.n(L)()({container:document.querySelector(".content"),attributes:{antialias:!0,alpha:!1}}),R=void 0,Y=n("woOf"),A=n.n(Y),U={fov:45,near:.01,far:1e3};w(function(t){t.addFolder("Camera").add(U,"fov",0,200)});var z={eye:[0,0,6],target:[0,0,0],up:[0,1,0]},T=M({context:{projection:function(t){var e=t.viewportWidth,n=t.viewportHeight,o=U.near,r=U.far,a=U.fov*Math.PI/180,i=e/n;return _.a.perspective([],a,i,o,r)},view:function(t,e){var n=A()({},z,e),o=n.eye,r=n.target,a=n.up;return _.a.lookAt([],o,r,a)},fov:function(){var t=U.fov;return t}},uniforms:{u_projection:M.context("projection"),u_view:M.context("view"),u_cameraPosition:M.context("eye"),u_resolution:function(t){return[t.viewportWidth,t.viewportHeight]}}}),X=[[0,0,1],[1,0,0],[0,0,-1],[-1,0,0],[0,1,0],[0,-1,0]].map(function(t){return[t,t,t,t]}),B=[[0,0,1],[0,1,0],[0,1,1],[0,1,1],[1,0,0],[1,0,1]].map(function(t){return[t,t,t,t]}),W=M.texture(),Z=M.cube(),G={translateX:0,translateY:0,translateZ:0,rotation:0,rotateX:1,rotateY:1,rotateZ:1,scale:1,borderWidth:.008,displacementLength:.028,reflectionOpacity:.3,scene:3};w(function(t){var e=t.addFolder("Cube");e.add(G,"translateX",-30,30).step(.01),e.add(G,"translateY",-30,30).step(.01),e.add(G,"translateZ",-30,30).step(.01),e.add(G,"rotation",-5,5).step(1e-4),e.add(G,"rotateX",0,10).step(.1),e.add(G,"rotateY",0,10).step(.1),e.add(G,"rotateZ",0,10).step(.1),e.add(G,"scale",0,10).step(.01),e.add(G,"borderWidth",0,.1).step(.01),e.add(G,"displacementLength",0,2).step(.01),e.add(G,"reflectionOpacity",0,1).step(.01),e.add(G,"scene",{Apple:3,Mask:2,Displacement:1})});var j=M({frag:"precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 u_resolution;\nuniform int u_face;\nuniform int u_typeId;\nuniform sampler2D u_texture;\nuniform samplerCube u_reflection;\nuniform float u_tick;\nuniform float u_borderWidth;\nuniform float u_displacementLength;\nuniform float u_reflectionOpacity;\nuniform int u_scene;\n\nvarying vec3 v_normal;\nvarying vec3 v_center;\nvarying vec3 v_point;\nvarying vec2 v_uv;\nvarying vec3 v_color;\nvarying float v_depth;\n\nconst float PI2 = 6.283185307179586;\n\nfloat borders(vec2 uv, float strokeWidth) {\n  vec2 borderBottomLeft = smoothstep(vec2(0.0), vec2(strokeWidth), uv);\n\n  vec2 borderTopRight = smoothstep(vec2(0.0), vec2(strokeWidth), 1.0 - uv);\n\n  return 1.0 - borderBottomLeft.x * borderBottomLeft.y * borderTopRight.x * borderTopRight.y;\n}\n\nconst float PI2_0 = 6.28318530718;\n\nvec4 radialRainbow(vec2 st, float tick) {\n  vec2 toCenter = vec2(0.5) - st;\n  float angle = mod((atan(toCenter.y, toCenter.x) / PI2_0) + 0.5 + sin(tick * 0.002), 1.0);\n\n  // colors\n  vec4 a = vec4(0.15, 0.58, 0.96, 1.0);\n  vec4 b = vec4(0.29, 1.00, 0.55, 1.0);\n  vec4 c = vec4(1.00, 0.0, 0.85, 1.0);\n  vec4 d = vec4(0.92, 0.20, 0.14, 1.0);\n  vec4 e = vec4(1.00, 0.96, 0.32, 1.0);\n\n  float step = 1.0 / 10.0;\n\n  vec4 color = a;\n\n  color = mix(color, b, smoothstep(step * 1.0, step * 2.0, angle));\n  color = mix(color, a, smoothstep(step * 2.0, step * 3.0, angle));\n  color = mix(color, b, smoothstep(step * 3.0, step * 4.0, angle));\n  color = mix(color, c, smoothstep(step * 4.0, step * 5.0, angle));\n  color = mix(color, d, smoothstep(step * 5.0, step * 6.0, angle));\n  color = mix(color, c, smoothstep(step * 6.0, step * 7.0, angle));\n  color = mix(color, d, smoothstep(step * 7.0, step * 8.0, angle));\n  color = mix(color, e, smoothstep(step * 8.0, step * 9.0, angle));\n  color = mix(color, a, smoothstep(step * 9.0, step * 10.0, angle));\n\n  return color;\n}\n\nmat2 scale(vec2 value){\n  return mat2(value.x, 0.0, 0.0, value.y);\n}\n\nmat2 rotate2d(float value){\n  return mat2(cos(value), -sin(value), sin(value), cos(value));\n}\n\nvec2 rotateUV(vec2 uv, float rotation) {\n  float mid = 0.5;\n  return vec2(\n    cos(rotation) * (uv.x - mid) + sin(rotation) * (uv.y - mid) + mid,\n    cos(rotation) * (uv.y - mid) - sin(rotation) * (uv.x - mid) + mid\n  );\n}\n\nvec4 type1() {\n  vec2 toCenter = v_center.xy - v_point.xy;\n  float angle = (atan(toCenter.y, toCenter.x) / PI2) + 0.5;\n  float displacement = borders(v_uv, u_displacementLength) + borders(v_uv, u_displacementLength * 2.143) * 0.3;\n\n  return vec4(angle, displacement, 0.0, 1.0);\n}\n\nvec4 type2() {\n  return vec4(v_color, 1.0);\n}\n\nvec4 type3() {\n  vec2 st = gl_FragCoord.xy / u_resolution;\n\n  vec4 strokeColor = radialRainbow(st, u_tick);\n  float depth = clamp(smoothstep(-1.0, 1.0, v_depth), 0.6, 0.9);\n  vec4 stroke = strokeColor * vec4(borders(v_uv, u_borderWidth)) * depth;\n\n  vec4 texture;\n\n  if (u_face == -1) {\n    vec3 normal = normalize(v_normal);\n    texture = textureCube(u_reflection, normalize(v_normal));\n\n    texture.a *= u_reflectionOpacity * depth;\n  }  else {\n    texture = texture2D(u_texture, st);\n  }\n\n  if (stroke.a > 0.0) {\n    return stroke - texture.a;\n  } else {\n    return texture;\n  }\n}\n\nvec4 switchScene(int id) {\n  if (id == 1) {\n    return type1();\n  } else if (id == 2) {\n    return type2();\n  } else if (id == 3) {\n    return type3();\n  }\n}\n\nvoid main() {\n  if (u_scene == 3) {\n    gl_FragColor = switchScene(u_typeId);\n  } else {\n    gl_FragColor = switchScene(u_scene);\n  }\n}",vert:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 a_position;\nattribute vec3 a_center;\nattribute vec2 a_uv;\nattribute vec3 a_color;\n\nuniform mat4 u_projection;\nuniform mat4 u_view;\nuniform mat4 u_world;\n\nvarying vec3 v_normal;\nvarying vec3 v_center;\nvarying vec3 v_point;\nvarying vec2 v_uv;\nvarying vec3 v_color;\nvarying float v_depth;\n\nvoid main() {\n  vec4 center = u_projection * u_view * u_world * vec4(a_center, 1.0);\n  vec4 position = u_projection * u_view * u_world * vec4(a_position, 1.0);\n\n  v_normal = normalize(a_position);\n  v_center = center.xyz;\n  v_point = position.xyz;\n  v_uv = a_uv;\n  v_color = a_color;\n  v_depth = (mat3(u_view) * mat3(u_world) * a_position).z;\n\n  gl_Position = position;\n}",context:{world:function(t,e){var n=e.matrix,o=G.translateX,r=G.translateY,a=G.translateZ,i=G.rotation,c=G.rotateX,u=G.rotateY,s=G.rotateZ,l=G.scale,v=_.a.create();return _.a.translate(v,v,[o,r,a]),_.a.rotate(v,v,i,[c,u,s]),_.a.scale(v,v,[l,l,l]),n&&_.a.multiply(v,v,n),v},face:function(t,e){return e.cullFace===H.FRONT?-1:1},texture:function(t,e){return e.texture||W},reflection:function(t,e){return e.reflection||Z},textureMatrix:function(t,e){return e.textureMatrix},borderWidth:function(){var t=G.borderWidth;return t},displacementLength:function(){var t=G.displacementLength;return t},reflectionOpacity:function(){var t=G.reflectionOpacity;return t},scene:function(){var t=G.scene;return parseFloat(t)}},attributes:{a_position:[[-1,1,1],[1,1,1],[1,-1,1],[-1,-1,1],[1,1,1],[1,1,-1],[1,-1,-1],[1,-1,1],[1,1,-1],[-1,1,-1],[-1,-1,-1],[1,-1,-1],[-1,1,-1],[-1,1,1],[-1,-1,1],[-1,-1,-1],[-1,1,-1],[1,1,-1],[1,1,1],[-1,1,1],[-1,-1,-1],[1,-1,-1],[1,-1,1],[-1,-1,1]],a_center:X,a_uv:[[0,0],[1,0],[1,1],[0,1],[0,0],[1,0],[1,1],[0,1],[0,0],[1,0],[1,1],[0,1],[0,0],[1,0],[1,1],[0,1],[0,0],[1,0],[1,1],[0,1],[0,0],[1,0],[1,1],[0,1]],a_color:B},uniforms:{u_world:M.context("world"),u_face:M.context("face"),u_typeId:M.prop("typeId"),u_texture:M.context("texture"),u_reflection:M.context("reflection"),u_tick:M.context("tick"),u_borderWidth:M.context("borderWidth"),u_displacementLength:M.context("displacementLength"),u_reflectionOpacity:M.context("reflectionOpacity"),u_scene:M.context("scene")},cull:{enable:!0,face:M.prop("cullFace")},depth:{enable:!0,mask:!1,func:"less"},blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:1,dstRGB:"one minus src alpha",dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},elements:[[2,1,0],[2,0,3],[6,5,4],[6,4,7],[10,9,8],[10,8,11],[14,13,12],[14,12,15],[18,17,16],[18,16,19],[20,21,22],[23,20,22]],count:36,framebuffer:M.prop("fbo")}),D=1,S=2,q=3,H={BACK:"back",FRONT:"front"},E=1,N=2,V=3,K=4,J=5,$=M.texture(),Q={translateX:0,translateY:0,translateZ:0,rotation:0,rotateX:1,rotateY:1,rotateZ:1,scale:1.4};w(function(t){var e=t.addFolder("Content");e.add(Q,"translateX",-30,30).step(.01),e.add(Q,"translateY",-30,30).step(.01),e.add(Q,"translateZ",-30,30).step(.01),e.add(Q,"rotation",-5,5).step(1e-4),e.add(Q,"rotateX",0,10).step(.1),e.add(Q,"rotateY",0,10).step(.1),e.add(Q,"rotateZ",0,10).step(.1),e.add(Q,"scale",0,10).step(.01)});var tt=M({frag:"precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 u_resolution;\nuniform sampler2D u_texture;\nuniform int u_maskId;\nuniform int u_typeId;\nuniform sampler2D u_displacement;\nuniform sampler2D u_mask;\nuniform float u_tick;\n\nvarying vec2 v_uv;\n\nconst float PI2 = 6.283185307179586;\n\nconst float PI = 3.141592653589793;\nconst float PI2_0 = 6.28318530718;\n\nmat2 scale(vec2 value) {\n  return mat2(value.x, 0.0, 0.0, value.y);\n}\n\nmat2 rotate2d(float value){\n  return mat2(cos(value), -sin(value), sin(value), cos(value));\n}\n\nvec3 gradient1(vec2 st, float tick) {\n  vec3 c1 = vec3(0.98, 0.71, 0.0);\n  vec3 c2 = vec3(0.95, 0.20, 0.14);\n  vec3 c3 = vec3(0.89, 0.12, 0.78);\n  vec3 c4 = vec3(0.30, 0.24, 0.96);\n\n  st.y = 1.0 - st.y;\n\n  vec2 toCenter = vec2(0.55, 0.58) - st;\n  float angle = atan(toCenter.y, toCenter.x) / PI;\n\n  vec3 colorA = mix(c1, c2, smoothstep(0.0, 0.5, angle));\n\n  st -= vec2(0.5);\n  st *= scale(vec2(1.4));\n  st *= rotate2d(-0.44);\n  st += vec2(0.5);\n\n  vec3 colorB = mix(c2, c3, smoothstep(0.3, 0.8, st.x));\n  colorB = mix(colorB, c4, smoothstep(0.55, 1.0, st.x));\n\n  return mix(colorA, colorB, smoothstep(0.28, 0.65, st.x));\n}\n\nvec3 gradient2(vec2 st, float tick) {\n  vec3 c1 = vec3(1.0, 0.8, 0.2);\n  vec3 c2 = vec3(0.92, 0.20, 0.14);\n\n  st -= vec2(0.5);\n  st *= scale(vec2(3.8));\n  st *= rotate2d(tick * PI);\n  st += vec2(0.5);\n\n  return mix(c1, c2, st.x);\n}\n\nvec3 gradient3(vec2 st, float tick) {\n  vec3 c1 = vec3(0.89, 0.12, 0.78);\n  vec3 c2 = vec3(0.29, 0.68, 0.95);\n\n  st -= vec2(0.5);\n  st *= scale(vec2(3.8));\n  st *= rotate2d(tick * PI);\n  st += vec2(0.5);\n\n  return mix(c1, c2, st.x);\n}\n\nvec3 gradients(int type, vec2 st, float tick) {\n  if (type == 1) {\n    return gradient1(st, tick);\n  } else if (type == 2) {\n    return gradient2(st, tick);\n  } else if (type == 3) {\n    return gradient3(st, tick);\n  }\n}\n\nvoid main() {\n  vec2 st = gl_FragCoord.xy / u_resolution;\n\n  vec4 displacement = texture2D(u_displacement, st);\n  \n  vec2 direction = vec2(cos(displacement.r * PI2), sin(displacement.r * PI2));\n  float length = displacement.g;\n\n  vec2 newUv = v_uv;\n\n  newUv.x += (length * 0.07) * direction.x;\n  newUv.y += (length * 0.07) * direction.y;\n\n  vec4 texture = texture2D(u_texture, newUv);\n  float tick = u_tick * 0.009;\n\n  vec3 color = gradients(u_typeId, v_uv, tick);\n\n  texture.rgb = color + (texture.rgb * color);\n\n  vec4 mask = texture2D(u_mask, st);\n\n  int maskId = int(mask.r * 4.0 + mask.g * 2.0 + mask.b * 1.0);\n\n  if (maskId == u_maskId) {\n    gl_FragColor = vec4(texture.rgb, texture.a * mask.a);\n  } else {\n    discard;\n  }\n}",vert:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 a_position;\nattribute vec2 a_uv;\n\nuniform mat4 u_projection;\nuniform mat4 u_view;\nuniform mat4 u_world;\n\nvarying vec2 v_uv;\n\nvoid main() {\n  v_uv = a_uv;\n\n  gl_Position = u_projection * u_view * u_world * vec4(a_position, 1);\n}",attributes:{a_position:[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0]],a_uv:[[0,0],[1,0],[1,1],[0,1]]},uniforms:{u_texture:M.prop("texture"),u_typeId:M.prop("typeId"),u_maskId:M.prop("maskId")},depth:{enable:!0,mask:!1,func:"less"},blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:1,dstRGB:"one minus src alpha",dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},elements:[0,1,2,0,2,3],count:6}),et=M({context:{world:function(){var t=Q.translateX,e=Q.translateY,n=Q.translateZ,o=Q.rotation,r=Q.rotateX,a=Q.rotateY,i=Q.rotateZ,c=Q.scale,u=_.a.create();return _.a.translate(u,u,[t,e,n]),_.a.rotate(u,u,o,[r,a,i]),_.a.scale(u,u,[c,c,c]),u},mask:function(t,e){return e.mask||$},displacement:function(t,e){return e.displacement||$}},uniforms:{u_world:M.context("world"),u_mask:M.context("mask"),u_displacement:M.context("displacement"),u_tick:M.context("tick")}}),nt=1,ot=2,rt=3,at=M({vert:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 a_position;\n\nuniform mat4 u_textureMatrix;\nuniform mat4 u_world;\n\nvarying vec4 vUv;\n\nvoid main() {\n  vUv = u_textureMatrix * vec4(a_position, 1.0);\n\n  gl_Position = u_world * vec4(a_position, 1.0);\n}",frag:"precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D u_texture;\n\nvarying vec4 vUv;\n\nvoid main() {\n  gl_FragColor = texture2DProj(u_texture, vUv);\n}",attributes:{a_position:[[-1,1,0],[1,-1,0],[-1,-1,0],[-1,1,0],[1,1,0],[1,-1,0]]},context:{world:function(t,e){var n=e.uvRotation,o=_.a.create();return _.a.rotate(o,o,n,[0,0,1]),o}},uniforms:{u_world:M.context("world"),u_texture:M.prop("texture"),u_textureMatrix:M.prop("textureMatrix")},count:6}),it={depthOpacity:.25};w(function(t){t.addFolder("Reflector").add(it,"depthOpacity",0,1).step(.01)});var ct=M({frag:"precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 u_resolution;\nuniform sampler2D u_texture;\nuniform float u_depthOpacity;\n\nvarying vec2 v_uv;\nvarying float v_z;\n\nmat2 scale(vec2 scale){\n  return mat2(scale.x, 0.0, 0.0, scale.y);\n}\n\nvoid main() {\n  vec2 st = gl_FragCoord.xy / u_resolution;\n\n  vec4 texture = texture2D(u_texture, v_uv);\n\n  texture.a -= u_depthOpacity * v_z;\n\n  gl_FragColor = texture;\n}",vert:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 a_position;\nattribute vec2 a_uv;\n\nuniform mat4 u_projection;\nuniform mat4 u_view;\nuniform mat4 u_world;\nuniform vec2 u_viewport;\n\nvarying vec2 v_uv;\nvarying float v_z;\n\nvoid main() {\n  v_uv = a_uv;\n  v_z = 1.0 - (mat3(u_view) * mat3(u_world) * a_position).z;\n\n  gl_Position = u_projection * u_view * u_world * vec4(a_position, 1);\n}",context:{world:function(t,e){var n=t.viewportWidth,o=t.viewportHeight,r=e.cameraConfig,a=e.fov*Math.PI/180,i=n/o,c=Math.tan(a/2)*r.eye[2],u=c*i,s=_.a.create();return _.a.scale(s,s,[u,c,1]),s},depthOpacity:function(){var t=it.depthOpacity;return t}},attributes:{a_position:[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0]],a_uv:[[0,0],[1,0],[1,1],[0,1]]},uniforms:{u_world:M.context("world"),u_texture:M.prop("texture"),u_depthOpacity:M.context("depthOpacity")},depth:{enable:!0,mask:!1,func:"less"},blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:1,dstRGB:"one minus src alpha",dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},elements:[0,1,2,0,2,3],count:6}),ut=[{position:[1,0,0],normal:[1,0,0],rotation:.5*-Math.PI,axis:[0,1,0],uvRotation:Math.PI},{position:[-1,0,0],normal:[-1,0,0],rotation:.5*Math.PI,axis:[0,1,0],uvRotation:Math.PI},{position:[0,1,0],normal:[0,1,0],rotation:.5*Math.PI,axis:[1,0,0],uvRotation:0},{position:[0,-1,0],normal:[0,-1,0],rotation:.5*-Math.PI,axis:[1,0,0],uvRotation:0},{position:[0,0,1],normal:[0,0,1],rotation:Math.PI,axis:[0,1,0],uvRotation:Math.PI},{position:[0,0,-1],normal:[0,0,-1],rotation:0,axis:[0,1,0],uvRotation:Math.PI}],st=M.framebuffer(),lt=function(t,e){var n=new Array(3);return n.fill(2*_.b.dot(e,t)),_.b.sub([],t,_.b.mul([],n,e))},vt=M({context:{config:function(t,e,n){var o=e.cameraConfig,r=e.rotationMatrix,a=ut[n],i=a.position,c=a.normal,u=a.rotation,s=a.axis,l=_.a.translate([],r,i),v=_.a.translate([],r,c);_.a.rotate(l,l,u,s);var d=_.a.getTranslation([],l),p=_.a.getTranslation([],v),f=o.eye,m=[0,0,0];_.b.sub(m,d,f),m=lt(m,p),_.b.negate(m,m),_.b.add(m,m,d);var x=[0,0,-1];_.b.add(x,x,f);var g=[0,0,0];_.b.sub(g,d,x),g=lt(g,p),_.b.negate(g,g),_.b.add(g,g,d);var h=[0,1,0];return{cameraConfig:{eye:m,target:g,up:h=lt(h,p)},planeMatrix:l}},uvRotation:function(t,e,n){var o=ut[n].uvRotation;return o},faceFbo:function(t,e,n){return e.reflectionFbo.faces[n]}}}),dt={cameraX:0,cameraY:0,cameraZ:10,rotation:4.8,rotateX:1,rotateY:1,rotateZ:1,velocity:.004};w(function(t){var e=t.addFolder("Main");e.add(dt,"cameraX",-20,20).step(.1),e.add(dt,"cameraY",-20,20).step(.1),e.add(dt,"cameraZ",-20,20).step(.1),e.add(dt,"rotation",-5,5).step(1e-4),e.add(dt,"rotateX",0,10).step(.1),e.add(dt,"rotateY",0,10).step(.1),e.add(dt,"rotateZ",0,10).step(.1),e.add(dt,"velocity",0,.05).step(1e-4)});var pt=M.framebuffer(),ft=M.framebuffer(),mt=M.framebuffer(),_t=M.framebufferCube(1024),xt=[{texture:C(M,"logo.png"),typeId:nt,maskId:E},{texture:C(M,"logo.png"),typeId:ot,maskId:N},{texture:C(M,"logo.png"),typeId:rt,maskId:V},{texture:C(M,"logo.png"),typeId:ot,maskId:K},{texture:C(M,"logo.png"),typeId:rt,maskId:J}],gt=function(t){var e=t.viewportWidth,n=t.viewportHeight,o=t.tick;g();var r=dt.rotation,a=dt.rotateX,i=dt.rotateY,c=dt.rotateZ,u=dt.velocity,s=dt.cameraX,l=dt.cameraY,v=dt.cameraZ;pt.resize(e,n),ft.resize(e,n),mt.resize(e,n);var d=o*u,p=_.a.create();_.a.rotate(p,p,r,[a,i,c]),_.a.rotate(p,p,d,[Math.cos(d),Math.sin(d),.5]);var f={eye:[s,l,v],target:[0,0,0]};M.clear({color:[0,0,0,0],depth:1}),T(f,function(){j([{fbo:pt,cullFace:H.BACK,typeId:D,matrix:p},{fbo:ft,cullFace:H.BACK,typeId:S,matrix:p}]),mt.use(function(){et({textures:xt,displacement:pt,mask:ft},function(t,e){var n=e.textures;M.clear({color:[0,0,0,0],depth:1}),tt(n)})})}),function(t){var e=t.reflectionFbo,n=t.cameraConfig,o=t.rotationMatrix,r=t.texture,a=new Array(6);a.fill({reflectionFbo:e,cameraConfig:n,rotationMatrix:o}),vt(a,function(t){var e=t.viewportWidth,o=t.viewportHeight,a=t.config,i=t.uvRotation,c=t.faceFbo,u=_.a.fromValues(.5,0,0,0,0,.5,0,0,0,0,.5,0,.5,.5,.5,1);st.resize(e,o),st.use(function(){M.clear({color:[0,0,0,0],depth:1}),T(a.cameraConfig,function(t){var e=t.projection,o=t.view,i=t.fov;_.a.multiply(u,u,e),_.a.mul(u,u,o),_.a.mul(u,u,a.planeMatrix),ct({texture:r,cameraConfig:n,fov:i})})}),c.use(function(){M.clear({color:[0,0,0,0],depth:1}),at({texture:st,textureMatrix:u,uvRotation:i})})})}({reflectionFbo:_t,cameraConfig:f,rotationMatrix:p,texture:mt}),T(f,function(){j([{cullFace:H.FRONT,typeId:q,reflection:_t,matrix:p},{cullFace:H.BACK,typeId:q,texture:mt,matrix:p}])}),h()},ht=function(t){for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];"string"==typeof n&&(n=F(n).context),xt.hasOwnProperty(e)&&(xt[e].texture=C(M,n))}var o;return o=gt,R||(R=M.frame(o)),function(t){for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];"string"==typeof n&&(n=F(n).context),xt.hasOwnProperty(e)&&(xt[e].texture=C(M,n))}O()}};o.a.config.productionTip=!1,o.a.prototype.initBackground=ht,new o.a({el:"#app",router:m,components:{App:l},template:"<App/>"})},PvXa:function(t,e,n){var o={"./logo.png":"7Otq","./logo2.png":"xAza","./text-1.png":"g6e0","./text-2.png":"hyUz"};function r(t){return n(a(t))}function a(t){var e=o[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}r.keys=function(){return Object.keys(o)},r.resolve=a,t.exports=r,r.id="PvXa"},UVIz:function(t,e){},g6e0:function(t,e,n){t.exports=n.p+"static/img/text-1.4e806de.png"},hyUz:function(t,e,n){t.exports=n.p+"static/img/text-2.7f975ef.png"},wOrG:function(t,e){},xAza:function(t,e,n){t.exports=n.p+"static/img/logo2.193a3c6.png"}},["NHnr"]);
//# sourceMappingURL=app.565d49d50b3659bfe465.js.map